# Unit tests

## 1. –¢–µ–æ—Ä—ñ—è
### 1.1. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è

Unit tests (–º–æ–¥—É–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏) - —Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —è–∫—ñ —Ç–µ—Å—Ç—É—é—Ç—å **–º–∞–ª–µ–Ω—å–∫—ñ —á–∞—Å—Ç–∏–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–∏** (–æ–¥–∏–Ω ‚Äú—é–Ωi—Ç‚Äù):
- —Ñ—É–Ω–∫—Ü—ñ—é
- –º–µ—Ç–æ–¥
- —Ñ–æ—Ä–º—É
- –æ–∫—Ä–µ–º–∏–π view
- –º–æ–¥–µ–ª—å–Ω—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—é

–ú–µ—Ç–∞ - —à–≤–∏–¥–∫–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏, —â–æ –∫–æ–¥ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ñ –Ω–µ –∑–ª–∞–º–∞–≤—Å—è –ø—ñ—Å–ª—è –∑–º—ñ–Ω.

### 1.2. –ù–∞–≤—ñ—â–æ –≤–æ–Ω–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ

1. –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Ä–µ–≥—Ä–µ—Å—ñ–π
    - –≤–∏ –∑–º—ñ–Ω–∏–ª–∏ –∫–æ–¥, —ñ —Ç–µ—Å—Ç–∏ –æ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∑–∞–ª–∏, —â–æ —â–æ—Å—å –∑–ª–∞–º–∞–ª–æ—Å—å
2. –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–∫–∏
    - –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –ø—Ä–æ–∫–ª—ñ–∫—É–≤–∞–Ω–Ω—è –±—Ä–∞—É–∑–µ—Ä–æ–º
3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏
    - —Ç–µ—Å—Ç–∏ –ø–æ–∫–∞–∑—É—é—Ç—å, ‚Äú—è–∫ –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º–∞‚Äù
4. –°–ø–æ–∫—ñ–π–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
    - –º–æ–∂–Ω–∞ —Å–º—ñ–ª–∏–≤—ñ—à–µ –ø–µ—Ä–µ–ø–∏—Å—É–≤–∞—Ç–∏ –∫–æ–¥, –±–æ —Ç–µ—Å—Ç–∏ –ª–æ–≤–ª—è—Ç—å –ø–æ–º–∏–ª–∫–∏

### 1.3. Unit tests vs Integration tests

1. Unit tests - –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —ñ–∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
2. Integration tests - –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å, —è–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å —Ä–∞–∑–æ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ–≤–Ω–∏–π —à–ª—è—Ö: –ª–æ–≥—ñ–Ω -> —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ -> –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –ë–î)

–£ Django –±—ñ–ª—å—à—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤ views —á–µ—Ä–µ–∑ `TestCase + Client` - —Ü–µ —á–∞—Å—Ç–æ ‚Äú–ª–µ–≥–∫—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ‚Äù, –∞–ª–µ –≤ –Ω–∞–≤—á–∞–Ω–Ω—ñ —ó—Ö –≤—Å–µ –æ–¥–Ω–æ –Ω–∞–∑–∏–≤–∞—é—Ç—å unit tests, –±–æ –≤–æ–Ω–∏ —Ç–µ—Å—Ç—É—é—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É –æ–¥–Ω–æ–≥–æ endpoint/view.

### 1.4. –Ø–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç—ñ–≤ –≤–∞—Ä—Ç–æ —Ç—Ä–∏–º–∞—Ç–∏ –≤ –≥–æ–ª–æ–≤—ñ

1. Arrange - –ø—ñ–¥–≥–æ—Ç—É–≤–∞–ª–∏ –¥–∞–Ω—ñ (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –∑–∞–¥–∞—á–∞)
2. Act - –≤–∏–∫–æ–Ω–∞–ª–∏ –¥—ñ—é (GET/POST –∑–∞–ø–∏—Ç)
3. Assert - –ø–µ—Ä–µ–≤—ñ—Ä–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å—Ç–∞—Ç—É—Å-–∫–æ–¥, —Ä–µ–¥—ñ—Ä–µ–∫—Ç, –∑–º—ñ–Ω–∞ –≤ –ë–î)


## 2. Te—Å—Ç–∏ –¥–ª—è –¥–æ–¥–∞—Ç–∫—É Tasks
### 2.1 –ù–∞–≤—ñ—â–æ –≤–∑–∞–≥–∞–ª—ñ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö —É —Ç–µ—Å—Ç–∞—Ö

–£ —Ç–µ—Å—Ç–∞—Ö –º–∏ –º–∞–π–∂–µ –∑–∞–≤–∂–¥–∏ —Ö–æ—á–µ–º–æ:
1. —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
2. —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—ñ
3. –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É view

–¶—ñ –¥–∞–Ω—ñ —Ç—Ä–µ–±–∞ **—è–∫–æ—Å—å –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏**.

–£ Django —î **–¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ —Å–ø–æ—Å–æ–±–∏**:

1. `setUp()` ‚Äî –ø–µ—Ä–µ–¥ –ö–û–ñ–ù–ò–ú —Ç–µ—Å—Ç–æ–º
2. `setUpTestData()` ‚Äî –û–î–ò–ù –†–ê–ó –¥–ª—è –≤—Å—å–æ–≥–æ –∫–ª–∞—Å—É

---
### 2.2 –©–æ —Ç–∞–∫–µ `setUpTestData`

–¶–µ **—Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –º–µ—Ç–æ–¥ Django**, —è–∫–∏–π:
1. –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**
2. —Å—Ç–≤–æ—Ä—é—î –¥–∞–Ω—ñ **–¥–ª—è –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤ —Ü—å–æ–≥–æ –∫–ª–∞—Å—É**
3. –∑–Ω–∞—á–Ω–æ **—à–≤–∏–¥—à–∏–π**, –Ω—ñ–∂ `setUp()`

`@classmethod` –æ–∑–Ω–∞—á–∞—î, —â–æ –º–µ—Ç–æ–¥:
- –Ω–∞–ª–µ–∂–∏—Ç—å **–∫–ª–∞—Å—É**, –∞ –Ω–µ –æ–± º—î–∫—Ç—É
- –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **–æ–¥–∏–Ω —Ä–∞–∑** –¥–ª—è –≤—Å—å–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∞—Å—É

–¢–æ–±—Ç–æ:
- `cls` ‚Äî —Ü–µ —Å–∞–º –∫–ª–∞—Å `TaskViewsTests`
- –∞ –Ω–µ –æ–∫—Ä–µ–º–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ—Å—Ç—É

```python
cls.user1 = User.objects.create_user(
    username="user1",
    password="pass12345"
)
```
- —Å—Ç–≤–æ—Ä—é—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –π–æ–≥–æ —è–∫ **–∞—Ç—Ä–∏–±—É—Ç –∫–ª–∞—Å—É**
- –ø–æ—Ç—ñ–º —É —Ç–µ—Å—Ç–∞—Ö –∑–≤–µ—Ä—Ç–∞—î–º–æ—Å—å —è–∫ `self.user1`

---
### 2.3 –†–æ–∑–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è `tasks`
#### 1) `test_task_list_requires_login`

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î**
–°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å–ø–∏—Å–∫—É –∑–∞–¥–∞—á **–Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –±–µ–∑ –ª–æ–≥—ñ–Ω—É**.

**–Ø–∫ –ø—Ä–∞—Ü—é—î**
1. `reverse("task-list")` –æ—Ç—Ä–∏–º—É—î URL –ø–æ —ñ–º–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç—É (–Ω–µ –ø–∏—à–µ–º–æ —Ä—è–¥–∫–æ–º `/tasks/`).
2. `self.client.get(url)` —ñ–º—ñ—Ç—É—î –∑–∞–ø–∏—Ç –±—Ä–∞—É–∑–µ—Ä–∞ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.
3. –û—á—ñ–∫—É—î–º–æ `302` (redirect), –±–æ `LoginRequiredMixin` –º–∞—î –ø–µ—Ä–µ–∫–∏–Ω—É—Ç–∏ –Ω–∞ –ª–æ–≥—ñ–Ω.
4. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ —Ä–µ–¥—ñ—Ä–µ–∫—Ç –≤–µ–¥–µ —Å–∞–º–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ª–æ–≥—ñ–Ω—É.

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ**
–¶–µ —Ç–µ—Å—Ç **–±–µ–∑–ø–µ–∫–∏ –¥–æ—Å—Ç—É–ø—É**: –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–∞—î –±–∞—á–∏—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –¥–∞–Ω—ñ.


#### 2) `test_task_list_shows_only_own_tasks`

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î**
–ü—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å **—Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –∑–∞–¥–∞—á—ñ**, –∞ –Ω–µ —á—É–∂—ñ.

**–Ø–∫ –ø—Ä–∞—Ü—é—î**
1. `self.client.login(...)` - ‚Äú–ª–æ–≥—ñ–Ω–∏—Ç—å‚Äù —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞ (—ñ–º—ñ—Ç—É—î —Å–µ—Å—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞).
2. –î–∞–ª—ñ GET –∑–∞–ø–∏—Ç –Ω–∞ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á.
3. –û—á—ñ–∫—É—î–º–æ `200`, –±–æ –¥–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–∏–π.
4. `assertContains` –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ HTML –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–∑–≤—É –∑–∞–¥–∞—á—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ 1.
5. `assertNotContains` –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ HTML –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–∑–≤—É –∑–∞–¥–∞—á—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ 2.

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ**
–¶–µ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ UI, –∞ **–∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É –Ω–∞ —Ä—ñ–≤–Ω—ñ –¥–∞–Ω–∏—Ö**:
- —è–∫—â–æ –∑–∞–±—É–¥–µ—Ç–µ `get_queryset()` –∑ —Ñ—ñ–ª—å—Ç—Ä–æ–º –ø–æ `owner`, —Ç–µ—Å—Ç –≤–ø–∞–¥–µ.


#### 3) `test_create_task_sets_owner_automatically`

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î**
–ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–¥–∞—á—ñ –≤–ª–∞—Å–Ω–∏–∫ (`owner`) **–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** —è–∫ –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.

**–Ø–∫ –ø—Ä–∞—Ü—é—î**
1. –õ–æ–≥—ñ–Ω–∏–º–æ—Å—è —è–∫ `user1`.
2. –ë–µ—Ä–µ–º–æ URL —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ.
3. –†–æ–±–∏–º–æ POST –∑ –¥–∞–Ω–∏–º–∏ —Ñ–æ—Ä–º–∏ (`payload`) - —Ü–µ —Å–∏–º—É–ª—è—Ü—ñ—è ‚Äú–Ω–∞—Ç–∏—Å–Ω—É–≤ Save‚Äù.
4. –û—á—ñ–∫—É—î–º–æ `302` —Ä–µ–¥—ñ—Ä–µ–∫—Ç (—É—Å–ø—ñ—à–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–∑–≤–∏—á–∞–π —Ä–µ–¥—ñ—Ä–µ–∫—Ç–∏—Ç—å).
5. –î—ñ—Å—Ç–∞—î–º–æ –∑–∞–¥–∞—á—É –∑ –±–∞–∑–∏.
6. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ —ó—ó `owner == user1`.

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ**
–¶–µ –ª–æ–≤–∏—Ç—å –ø–æ—à–∏—Ä–µ–Ω—É –ø–æ–º–∏–ª–∫—É:
- —è–∫—â–æ —Ö—Ç–æ—Å—å —Å–ø—Ä–æ–±—É—î –¥–æ–¥–∞—Ç–∏ –ø–æ–ª–µ owner —É —Ñ–æ—Ä–º—É —ñ –¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤–∏–±–∏—Ä–∞—Ç–∏
- –∞–±–æ –∑–∞–±—É–¥–µ –ø—Ä–∏—Å–≤–æ—ó—Ç–∏ `form.instance.owner = request.user`
    –¢–µ—Å—Ç –æ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∂–µ –ø—Ä–æ–±–ª–µ–º—É.

#### 4) `test_toggle_complete_changes_status`

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î**
Endpoint ‚Äútoggle complete‚Äù —Ä–µ–∞–ª—å–Ω–æ –∑–º—ñ–Ω—é—î `is_completed`.

**–Ø–∫ –ø—Ä–∞—Ü—é—î**
1. –õ–æ–≥—ñ–Ω–∏–º–æ—Å—è —è–∫ `user1`.
2. –§–æ—Ä–º—É—î–º–æ URL `/tasks/<pk>/toggle/` –¥–ª—è –∑–∞–¥–∞—á—ñ `user1`.
3. –ü–µ—Ä–µ–¥ –¥—ñ—î—é –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ `is_completed` –∑–∞—Ä–∞–∑ `False`.
4. –†–æ–±–∏–º–æ POST –Ω–∞ toggle endpoint.
5. –û—á—ñ–∫—É—î–º–æ —Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞–∑–∞–¥ (302).
6. –ó–∞–Ω–æ–≤–æ —á–∏—Ç–∞—î–º–æ –∑–∞–¥–∞—á—É –∑ –±–∞–∑–∏ —ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ —Å—Ç–∞–ª–æ `True`.

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ**
–¢–µ—Å—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Å–∞–º–µ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É: ‚Äú–∫–ª—ñ–∫–Ω—É–≤ - —Å—Ç–∞–Ω –∑–º—ñ–Ω–∏–≤—Å—è‚Äù.


#### 5) `test_toggle_complete_forbidden_for_other_users_task`

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î**
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á **–Ω–µ –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —á—É–∂—É –∑–∞–¥–∞—á—É**.

**–Ø–∫ –ø—Ä–∞—Ü—é—î**
1. –õ–æ–≥—ñ–Ω–∏–º–æ—Å—è —è–∫ `user1`.
2. –ë–µ—Ä–µ–º–æ URL toggle –¥–ª—è –∑–∞–¥–∞—á—ñ, —è–∫–∞ –Ω–∞–ª–µ–∂–∏—Ç—å `user2`.
3. –†–æ–±–∏–º–æ POST.
4. –û—á—ñ–∫—É—î–º–æ, —â–æ –¥–æ—Å—Ç—É–ø –±—É–¥–µ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–π:
    - –∞–±–æ `403 Forbidden` (—è–∫—â–æ –ø—Ä–∞—Ü—é—î `UserPassesTestMixin`)
    - –∞–±–æ `404 Not Found` (—è–∫—â–æ –≤–∏ –∑–∞—Ö–∏—â–∞—î—Ç–µ —á–µ—Ä–µ–∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é queryset)
5. –î–æ–¥–∞—Ç–∫–æ–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ —Å—Ç–∞–Ω –∑–∞–¥–∞—á—ñ `user2` –Ω–µ –∑–º—ñ–Ω–∏–≤—Å—è.

**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ**
–¶–µ –∫–ª—é—á–æ–≤–∏–π —Ç–µ—Å—Ç –±–µ–∑–ø–µ–∫–∏. –í—ñ–Ω –ª–æ–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü—ñ—é:
- —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ ‚Äú–∑–∞–±—É–≤‚Äù –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `owner` —É toggle view
- —ñ —Ç–æ–¥—ñ –±—É–¥—å-—Ö—Ç–æ –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏ —á—É–∂—ñ –∑–∞–¥–∞—á—ñ

---
### 2.4 –¢–µ—Å—Ç–∏ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–µ–¥–ª–∞–π–Ω—É (TaskForm)

–°—Ç–≤–æ—Ä—ñ—Ç—å `tasks/tests/test_forms.py` –∞–±–æ –¥–æ–¥–∞–π—Ç–µ –≤ `tasks/tests.py`:

```python
from datetime import date, timedelta
from django.test import TestCase
from tasks.forms import TaskForm


class TaskFormTests(TestCase):
    def test_deadline_cannot_be_in_past(self):
        form = TaskForm(
            data={
                "title": "T",
                "description": "D",
                "deadline": date.today() - timedelta(days=1),
            }
        )
        self.assertFalse(form.is_valid())
        self.assertIn("deadline", form.errors)

    def test_deadline_can_be_today_or_future(self):
        form = TaskForm(
            data={
                "title": "T",
                "description": "D",
                "deadline": date.today(),
            }
        )
        self.assertTrue(form.is_valid())
```

#### –ó–∞–≥–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–ª–∞—Å—É `TaskFormTests`
–¶–µ–π –∫–ª–∞—Å —Ç–µ—Å—Ç—É—î **–≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ñ–æ—Ä–º–∏**, –∞ –Ω–µ:
- views
- –¥–æ—Å—Ç—É–ø
- —Ä–æ–±–æ—Ç—É –∑ –±–∞–∑–æ—é

–¢–æ–±—Ç–æ –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ:
> —á–∏ —Ñ–æ—Ä–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–π–º–∞—î –∞–±–æ –≤—ñ–¥—Ö–∏–ª—è—î –≤–≤–µ–¥–µ–Ω—ñ –¥–∞–Ω—ñ


–£ `TaskFormTests` **–Ω–µ–º–∞—î `setUpTestData`**, –±–æ:
- —Ü—ñ —Ç–µ—Å—Ç–∏ **–Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –¥–∞–Ω–∏—Ö –∑ –±–∞–∑–∏**
- –º–∏ —Ç–µ—Å—Ç—É—î–º–æ **—á–∏—Å—Ç—É –ª–æ–≥—ñ–∫—É —Ñ–æ—Ä–º–∏**, –∞ –Ω–µ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –º–æ–¥–µ–ª—è–º–∏ –≤ –ë–î

#### 1) `test_deadline_cannot_be_in_past`

##### –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ü–µ–π —Ç–µ—Å—Ç

–§–æ—Ä–º–∞ **–Ω–µ –ø–æ–≤–∏–Ω–Ω–∞ –ø—Ä–∏–π–º–∞—Ç–∏ –¥–µ–¥–ª–∞–π–Ω —É –º–∏–Ω—É–ª–æ–º—É**.
–¶–µ –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–æ:
- –Ω–µ –º–∞—î —Å–µ–Ω—Å—É —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–∞–¥–∞—á—É –∑ –¥–µ–¥–ª–∞–π–Ω–æ–º ‚Äú–≤—á–æ—Ä–∞‚Äù

##### –Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π —Ç–µ—Å—Ç (–∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º)

1. **–°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–æ—Ä–º—É**
`form = TaskForm(data={...})`

–§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è:
- —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π Python-–æ–± º—î–∫—Ç
- –±–µ–∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î


2. **–ü–µ—Ä–µ–¥–∞—î–º–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ**
`"deadline": date.today() - timedelta(days=1)`

–¢—É—Ç –º–∏ –Ω–∞–≤–º–∏—Å–Ω–æ:
- –ø–µ—Ä–µ–¥–∞—î–º–æ –¥–∞—Ç—É –≤ –º–∏–Ω—É–ª–æ–º—É
- —ñ–º—ñ—Ç—É—î–º–æ –ø–æ–º–∏–ª–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞


3. **–í–∏–∫–ª–∏–∫–∞—î–º–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é**
`form.is_valid()`

–¶–µ–π –≤–∏–∫–ª–∏–∫:
- –∑–∞–ø—É—Å–∫–∞—î –≤—Å—ñ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ñ–æ—Ä–º–∏
- –≤–∫–ª—é—á–Ω–æ –∑ `clean_deadline()`


4. **–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ —Ñ–æ—Ä–º–∞ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∞**
`self.assertFalse(form.is_valid())`

–¢–µ—Å—Ç –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î:
- —Ñ–æ—Ä–º–∞ –ø–æ–≤–∏–Ω–Ω–∞ –≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ


5. **–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ –ø–æ–º–∏–ª–∫–∞ —Å–∞–º–µ –≤ –ø–æ–ª—ñ `deadline`**
`self.assertIn("deadline", form.errors)`

–¶–µ –≤–∞–∂–ª–∏–≤–æ:
- –ø–æ–º–∏–ª–∫–∞ –º–∞—î –±—É—Ç–∏ –ø—Ä–∏–≤ º—è–∑–∞–Ω–∞ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è
- –∞ –Ω–µ –∑–∞–≥–∞–ª—å–Ω–æ—é (`__all__`)

##### –ß–æ–º—É —Ü–µ–π —Ç–µ—Å—Ç –≤–∞–∂–ª–∏–≤–∏–π

–í—ñ–Ω –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ:
- –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –ø—Ä–∞—Ü—é—î
- –Ω—ñ—Ö—Ç–æ –≤–∏–ø–∞–¥–∫–æ–≤–æ –Ω–µ –ø—Ä–∏–±–µ—Ä–µ `clean_deadline`
- –¥–µ–¥–ª–∞–π–Ω —É –º–∏–Ω—É–ª–æ–º—É –∑–∞–≤–∂–¥–∏ –±—É–¥–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π

#### 2) `test_deadline_can_be_today_or_future`

##### –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ü–µ–π —Ç–µ—Å—Ç

–§–æ—Ä–º–∞ **–ø—Ä–∏–π–º–∞—î –≤–∞–ª—ñ–¥–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–µ–¥–ª–∞–π–Ω—É**:
- —Å—å–æ–≥–æ–¥–Ω—ñ
- –∞–±–æ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É

##### –Ø–∫ –ø—Ä–∞—Ü—é—î —Ü–µ–π —Ç–µ—Å—Ç

1. **–°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–æ—Ä–º—É –∑ –≤–∞–ª—ñ–¥–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏**
`"deadline": date.today()`

–¶–µ:
- –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–µ –∑–Ω–∞—á–µ–Ω–Ω—è
- –≥—Ä–∞–Ω–∏—á–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫ (edge case)


2. **–í–∏–∫–ª–∏–∫–∞—î–º–æ `is_valid()`**
`self.assertTrue(form.is_valid())`

–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ:
- —Ñ–æ—Ä–º–∞ –≤–∞–ª—ñ–¥–Ω–∞
- –∂–æ–¥–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–∞ –ø–æ–º–∏–ª–∫–æ–≤–æ

##### –ß–æ–º—É —Ü–µ–π —Ç–µ—Å—Ç –Ω–µ –º–µ–Ω—à –≤–∞–∂–ª–∏–≤–∏–π, –Ω—ñ–∂ –ø–µ—Ä—à–∏–π

–Ø–∫—â–æ —î —Ç—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç ‚Äú–Ω–µ –º–æ–∂–Ω–∞ –≤ –º–∏–Ω—É–ª–æ–º—É‚Äù, –∞–ª–µ –Ω–µ–º–∞—î —Ç–µ—Å—Ç—É ‚Äú–º–æ–∂–Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ‚Äù:
- –º–æ–∂–Ω–∞ –ª–µ–≥–∫–æ –∑—Ä–æ–±–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É `<=` –∑–∞–º—ñ—Å—Ç—å `<`
- —ñ —Ñ–æ—Ä–º–∞ –ø–æ—á–Ω–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ –≤–∞–ª—ñ–¥–Ω—ñ –¥–∞–Ω—ñ

–¶–µ–π —Ç–µ—Å—Ç:
- –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –Ω–∞–¥—Ç–æ –∂–æ—Ä—Å—Ç–∫–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó


#### –¶—ñ –¥–≤–∞ —Ç–µ—Å—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å **—É –ø–∞—Ä—ñ**:

|–¢–µ—Å—Ç|–©–æ –≥–∞—Ä–∞–Ω—Ç—É—î|
|---|---|
|`cannot_be_in_past`|–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ –±–ª–æ–∫—É—é—Ç—å—Å—è|
|`can_be_today_or_future`|–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è|

–†–∞–∑–æ–º –≤–æ–Ω–∏:
- –æ–ø–∏—Å—É—é—Ç—å –ø—Ä–∞–≤–∏–ª–æ –ø–æ–≤–Ω—ñ—Å—Ç—é
- —Ñ—ñ–∫—Å—É—é—Ç—å –æ—á—ñ–∫—É–≤–∞–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É

---
### 2.5 –ü—ñ–¥—Å—É–º—É—î–º–æ

1. `TestCase` –ø—ñ–¥–Ω—ñ–º–∞—î —Ç–µ—Å—Ç–æ–≤—É –±–∞–∑—É –¥–∞–Ω–∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
2. `self.client` - —Ü–µ ‚Äú–±—Ä–∞—É–∑–µ—Ä‚Äù –¥–ª—è —Ç–µ—Å—Ç—ñ–≤ (—ñ–º—ñ—Ç–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤ GET/POST)
3. `reverse("task-list")` - –∫—Ä–∞—â–µ, –Ω—ñ–∂ –ø–∏—Å–∞—Ç–∏ URL —Ä—è–¥–∫–æ–º
4. –ß–æ–º—É –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ:
    - —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ (200/302/403)
    - —Ä–µ–¥—ñ—Ä–µ–∫—Ç
    - –∑–º—ñ–Ω–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
5. –ß–æ–º—É —Ç–µ—Å—Ç ‚Äú–±–∞—á—É —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –∑–∞–¥–∞—á—ñ‚Äù - —Ü–µ —Ç–µ—Å—Ç –±–µ–∑–ø–µ–∫–∏, –∞ –Ω–µ —Ç—ñ–ª—å–∫–∏ UI

---
## 3. –Ø–∫ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç–µ—Å—Ç–∏

1. –ó–∞–ø—É—Å–∫ —É—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤: `python manage.py test`
2. –ó–∞–ø—É—Å–∫ —Ç—ñ–ª—å–∫–∏ tasks: `python manage.py test tasks`
3. –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—É: `python manage.py test tasks.tests.TaskViewsTests`

### 3.1 –ö–æ–ª–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç–µ—Å—Ç–∏

#### –ü—ñ—Å–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

–ù–∞–ø–∏—Å–∞–ª–∏:
- –Ω–æ–≤–∏–π view
- –Ω–æ–≤—É —Ñ–æ—Ä–º—É
- –Ω–æ–≤—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—é
üëâ **–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏**

#### –ü—ñ—Å–ª—è –∑–º—ñ–Ω —É –∫–æ–¥—ñ

–ó–º—ñ–Ω–∏–ª–∏:
- –ª–æ–≥—ñ–∫—É –¥–æ—Å—Ç—É–ø—É
- queryset
- —Ñ–æ—Ä–º—É
- redirect
üëâ **–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–∏**, —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–ª–∞–º–∞–ª–æ—Å—å

#### –ü–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º —É Git

–•–æ—Ä–æ—à–∞ –∑–≤–∏—á–∫–∞:

```
1. –Ω–∞–ø–∏—Å–∞–≤ –∫–æ–¥
2. –∑–∞–ø—É—Å—Ç–∏–≤ —Ç–µ—Å—Ç–∏
3. —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ –∑—Ä–æ–±–∏–≤ commit
```

#### –ü–µ—Ä–µ–¥ pull request

–£ —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö:
- —Ç–µ—Å—Ç–∏ –º–∞—é—Ç—å –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –¥–æ —Ç–æ–≥–æ, —è–∫ –∫–æ–¥ –ø–æ—Ç—Ä–∞–ø–∏—Ç—å —É main


### 3.2 –ß–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è —Ç–µ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

#### –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî –ù–Ü

Django **–Ω–µ –∑–∞–ø—É—Å–∫–∞—î —Ç–µ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**, –∫–æ–ª–∏ –≤–∏:
- –∑–∞–ø—É—Å–∫–∞—î—Ç–µ —Å–µ—Ä–≤–µ—Ä
- –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç–µ —Å–∞–π—Ç
- –∑–±–µ—Ä—ñ–≥–∞—î—Ç–µ —Ñ–∞–π–ª
–¢–µ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É**, —è–∫—â–æ –≤–∏ —è–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞–ª–∏ –∫–æ–º–∞–Ω–¥—É `test`.

### 3.3 –ö–æ–ª–∏ —Ç–µ—Å—Ç–∏ –º–æ–∂—É—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

##### –í–ê–†–Ü–ê–ù–¢ 1. CI/CD (—Ä–µ–∞–ª—å–Ω–∏–π –ø—Ä–æ–¥–∞–∫—à–Ω)

–£ —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç–∞—Ö —Ç–µ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è:
- –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É push
- –∞–±–æ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ pull request

–ü—Ä–∏–∫–ª–∞–¥:
- GitHub Actions
- GitLab CI
- Bitbucket Pipelines

–°—Ö–µ–º–∞:

```
push ‚Üí CI ‚Üí run tests ‚Üí allow / block merge
```

##### –í–ê–†–Ü–ê–ù–¢ 2. Pre-commit hooks (–ø—Ä–æ—Å—É–Ω—É—Ç–æ)

–ú–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏:
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤ –ø–µ—Ä–µ–¥ `git commit`
