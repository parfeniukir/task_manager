{% extends "base.html" %}

{% block content %}
<h2>My tasks</h2>

<a href="{% url 'task-create' %}">Create task</a>

<ul>
    {% for task in tasks %}
        <li>
            <form method="post" action="{% url 'task-toggle' task.pk %}" style="display: inline;">
                {% csrf_token %}
                <input type="checkbox" {% if task.is_completed %} checked {% endif %} onchange="this.form.submit()">

                <a href="{% url 'task-detail' task.pk %}">{{ task.title }}</a> - {{ task.deadline }}
            </form>
            <a href="{% url 'task-update' task.pk %}">Edit</a>
            <a href="{% url 'task-delete' task.pk %}">Delete</a>
        </li>
    {% empty %}
        <li>No tasks yet</li>
    {% endfor %}
</ul>
{% endblock %}
